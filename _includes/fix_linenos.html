{%- comment -%}
이 파일은 이전에 줄 번호가 있는 강조된 코드에 대해 Jekyll에서 생성된 HTML을 "수정"하는 데 사용되었습니다. 누락된 HTML 태그로 인한 레이아웃 문제를 해결하는 경우가 많지만 여전히 잘못된 HTML을 생성합니다(`<code>` 블록 내에 `<table>` 요소를 배치). 따라서 더 이상 이 해결 방법을 권장하지 않습니다. 자세한 내용은 "줄 번호가 있는 코드 스니펫" 문서 페이지를 참조하세요:
https://just-the-docs.com/docs/ui-components/code/line-numbers/
(또는 docs/ui-components/line-nos.md/)

이 파일의 다음 부분은 주석과 해결 방법을 포함하여 역호환성을 위해 유지됩니다.

감사의 말

구현은 다음에서 제공한 해결 방법에서 파생되었습니다:
Dmitry Hrabrov (DeXP) at
https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901

설명 (구)

줄 번호가 있는 Rouge 강조가 생성한 HTML의 형식은 `code table`입니다. Jekyll은 항상 강조된 HTML을 `pre`로 감싸줍니다. 이 래핑은 불필요할 뿐만 아니라 Rouge가 생성한 정합한 HTML을 부정합한 HTML로 변환하여 HTML 검증 오류 보고서가 발생합니다.

수정은 패턴 `<table class="rouge-table">`를 포함할 때마다 바깥쪽 `pre` 태그를 제거합니다.

HTML 검증 오류를 방지하는 것 외에도 수정으로 인해 `pre` 태그가 중첩되지 않는 것에 따라 [HTML을 압축하는 Jekyll 레이아웃](http://jch.penibelst.de)을 사용할 수 있습니다. 참조:
https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-172069842

사용법

(모든 이름은 `some_var` 및 `some_language`에 사용할 수 있습니다.)

{%- endcomment -%}

{% capture some_var %}
{% highlight some_language linenos %}
Some code
{% endhighlight %}
{% endcapture %}
{% include fix_linenos.html code=some_var %}

For code fences:

{% capture some_var %}
```some_language
Some code
```
{% endcapture %}
{% assign some_var = some_var | markdownify %}
{% include fix_linenos.html code=some_var %}

CAVEATS

The above does not work when `Some code` happens to contain the matched string
`<table class="rouge-table">`.

The use of this file overwrites the variable `fix_linenos_code` with `nil`.

{%- endcomment -%}

{% assign fix_linenos_code = include.code %}
{% if fix_linenos_code contains '<table class="rouge-table">' %}
  {% assign fix_linenos_code = fix_linenos_code | replace: '<pre class="highlight">', '<pre>' %}
  {% assign fix_linenos_code = fix_linenos_code | replace: "<pre><code", "<code" %}
  {% assign fix_linenos_code = fix_linenos_code | replace: "</code></pre>", "</code>" %}
{% endif %}
{{ fix_linenos_code }}
{% assign fix_linenos_code = nil %}
